<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<VBox alignment="CENTER" spacing="20" style="-fx-background-color: #f8f9fa;" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.cafe.controller.admin.ReportController">

    <padding>
        <Insets bottom="30" left="30" right="30" top="30" />
    </padding>

    <!-- Filter Controls -->
    <HBox alignment="CENTER" spacing="15">
        <DatePicker fx:id="startDatePicker" promptText="Tá»« ngÃ y" />
        <DatePicker fx:id="endDatePicker" promptText="Äáº¿n ngÃ y" />
        <ComboBox fx:id="reportTypeCombo" promptText="Loáº¡i bÃ¡o cÃ¡o" style="-fx-pref-width: 150;" />
        <Button fx:id="generateReportButton" style="-fx-background-color: #2E86AB; -fx-text-fill: white;" text="Táº¡o bÃ¡o cÃ¡o" />
        <Button fx:id="exportExcelButton" style="-fx-background-color: #28a745; -fx-text-fill: white;" text="Xuáº¥t Excel" />
        <Button fx:id="exportPDFButton" style="-fx-background-color: #dc3545; -fx-text-fill: white;" text="Xuáº¥t PDF" />
    </HBox>

    <!-- Statistics Cards -->
    <HBox alignment="CENTER" spacing="20">
        <VBox alignment="CENTER" style="-fx-background-color: #e8f5e8; -fx-padding: 20; -fx-background-radius: 10; -fx-min-width: 150;">
            <Label fx:id="todayRevenueLabel" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #2e7d32;" text="0 VNÄ" />
            <Label style="-fx-font-size: 12px; -fx-text-fill: #666;" text="Doanh thu hÃ´m nay" />
            <Label style="-fx-font-size: 14px; -fx-text-fill: #2e7d32; -fx-font-weight: bold;" text="+0%" />
        </VBox>

        <VBox alignment="CENTER" style="-fx-background-color: #fff3e0; -fx-padding: 20; -fx-background-radius: 10; -fx-min-width: 150;">
            <Label fx:id="todayOrdersLabel" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #f57c00;" text="0" />
            <Label style="-fx-font-size: 12px; -fx-text-fill: #666;" text="ÄÆ¡n hÃ ng hÃ´m nay" />
            <Label style="-fx-font-size: 14px; -fx-text-fill: #f57c00; -fx-font-weight: bold;" text="+0%" />
        </VBox>

        <VBox alignment="CENTER" style="-fx-background-color: #e3f2fd; -fx-padding: 20; -fx-background-radius: 10; -fx-min-width: 150;">
            <Label fx:id="newCustomersLabel" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #1976d2;" text="0" />
            <Label style="-fx-font-size: 12px; -fx-text-fill: #666;" text="KhÃ¡ch hÃ ng má»›i" />
            <Label style="-fx-font-size: 14px; -fx-text-fill: #1976d2; -fx-font-weight: bold;" text="+0%" />
        </VBox>

        <VBox alignment="CENTER" style="-fx-background-color: #fce4ec; -fx-padding: 20; -fx-background-radius: 10; -fx-min-width: 150;">
            <Label fx:id="monthlyProfitLabel" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #c2185b;" text="0 VNÄ" />
            <Label style="-fx-font-size: 12px; -fx-text-fill: #666;" text="Lá»£i nhuáº­n thÃ¡ng" />
            <Label style="-fx-font-size: 14px; -fx-text-fill: #c2185b; -fx-font-weight: bold;" text="+0%" />
        </VBox>
    </HBox>

    <!-- Report Content -->
    <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS">
        <TabPane style="-fx-background-color: white; -fx-background-radius: 10;">

            <!-- Sales Report Tab -->
            <Tab closable="false" text="BÃ¡o cÃ¡o doanh thu">
                <VBox spacing="15" style="-fx-padding: 20;">

                    <!-- Chart Container -->
                    <VBox fx:id="salesChartContainer" spacing="10">
                        <Label style="-fx-font-size: 16px; -fx-font-weight: bold;" text="Biá»ƒu Ä‘á»“ doanh thu theo ngÃ y" />
                        <!-- Charts will be added programmatically here -->
                    </VBox>

                    <!-- Table -->
                    <VBox spacing="10">
                        <Label style="-fx-font-size: 16px; -fx-font-weight: bold;" text="Chi tiáº¿t doanh thu" />
                        <TableView fx:id="salesTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="dateColumn" prefWidth="120" text="NgÃ y" />
                                <TableColumn fx:id="revenueColumn" prefWidth="150" text="Doanh thu" />
                                <TableColumn fx:id="orderCountColumn" prefWidth="120" text="Sá»‘ Ä‘Æ¡n hÃ ng" />
                                <TableColumn fx:id="avgOrderColumn" prefWidth="150" text="Trung bÃ¬nh/Ä‘Æ¡n" />
                                <TableColumn fx:id="growthColumn" prefWidth="100" text="TÄƒng trÆ°á»ng" />
                            </columns>
                        </TableView>
                    </VBox>
                </VBox>
            </Tab>

            <!-- Product Report Tab -->
            <Tab closable="false" text="BÃ¡o cÃ¡o sáº£n pháº©m">
                <VBox spacing="15" style="-fx-padding: 20;">

                    <!-- Chart Container -->
                    <VBox fx:id="productChartContainer" spacing="10">
                        <Label style="-fx-font-size: 16px; -fx-font-weight: bold;" text="Biá»ƒu Ä‘á»“ phÃ¢n bá»‘ sáº£n pháº©m" />
                        <!-- Charts will be added programmatically here -->
                    </VBox>

                    <!-- Table -->
                    <VBox spacing="10">
                        <Label style="-fx-font-size: 16px; -fx-font-weight: bold;" text="Top sáº£n pháº©m bÃ¡n cháº¡y" />
                        <TableView fx:id="productTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="productNameColumn" prefWidth="200" text="Sáº£n pháº©m" />
                                <TableColumn fx:id="quantityColumn" prefWidth="120" text="Sá»‘ lÆ°á»£ng bÃ¡n" />
                                <TableColumn fx:id="productRevenueColumn" prefWidth="150" text="Doanh thu" />
                                <TableColumn fx:id="percentageColumn" prefWidth="150" text="Tá»•ng doanh thu" />
                            </columns>
                        </TableView>
                    </VBox>
                </VBox>
            </Tab>

            <!-- Customer Report Tab -->
            <Tab closable="false" text="BÃ¡o cÃ¡o khÃ¡ch hÃ ng">
                <VBox spacing="15" style="-fx-padding: 20;">

                    <!-- Chart Container -->
                    <VBox fx:id="customerChartContainer" spacing="10">
                        <Label style="-fx-font-size: 16px; -fx-font-weight: bold;" text="Biá»ƒu Ä‘á»“ top khÃ¡ch hÃ ng" />
                        <!-- Charts will be added programmatically here -->
                    </VBox>

                    <!-- Table -->
                    <VBox spacing="10">
                        <Label style="-fx-font-size: 16px; -fx-font-weight: bold;" text="Thá»‘ng kÃª khÃ¡ch hÃ ng" />
                        <TableView fx:id="customerTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="customerNameColumn" prefWidth="200" text="KhÃ¡ch hÃ ng" />
                                <TableColumn fx:id="customerOrderCountColumn" prefWidth="120" text="Sá»‘ Ä‘Æ¡n hÃ ng" />
                                <TableColumn fx:id="customerTotalColumn" prefWidth="150" text="Tá»•ng chi tiÃªu" />
                                <TableColumn fx:id="lastOrderColumn" prefWidth="120" text="ÄÆ¡n hÃ ng cuá»‘i" />
                            </columns>
                        </TableView>
                    </VBox>
                </VBox>
            </Tab>

            <!-- Summary Tab -->
            <Tab closable="false" text="Tá»•ng quan">
                <ScrollPane fitToWidth="true">
                    <VBox spacing="20" style="-fx-padding: 20;">

                        <!-- Overall Statistics -->
                        <VBox spacing="10">
                            <Label style="-fx-font-size: 18px; -fx-font-weight: bold;" text="Thá»‘ng kÃª tá»•ng quan" />

                            <HBox spacing="20">
                                <VBox alignment="CENTER" style="-fx-background-color: #f8f9fa; -fx-padding: 15; -fx-background-radius: 8; -fx-border-color: #dee2e6; -fx-border-radius: 8;">
                                    <Label style="-fx-font-size: 14px; -fx-font-weight: bold;" text="Doanh thu cao nháº¥t" />
                                    <Label style="-fx-font-size: 20px; -fx-text-fill: #28a745;" text="--" />
                                </VBox>

                                <VBox alignment="CENTER" style="-fx-background-color: #f8f9fa; -fx-padding: 15; -fx-background-radius: 8; -fx-border-color: #dee2e6; -fx-border-radius: 8;">
                                    <Label style="-fx-font-size: 14px; -fx-font-weight: bold;" text="Sáº£n pháº©m bÃ¡n cháº¡y nháº¥t" />
                                    <Label style="-fx-font-size: 20px; -fx-text-fill: #007bff;" text="--" />
                                </VBox>

                                <VBox alignment="CENTER" style="-fx-background-color: #f8f9fa; -fx-padding: 15; -fx-background-radius: 8; -fx-border-color: #dee2e6; -fx-border-radius: 8;">
                                    <Label style="-fx-font-size: 14px; -fx-font-weight: bold;" text="KhÃ¡ch hÃ ng VIP" />
                                    <Label style="-fx-font-size: 20px; -fx-text-fill: #dc3545;" text="--" />
                                </VBox>
                            </HBox>
                        </VBox>

                        <!-- Trend Analysis -->
                        <VBox spacing="10">
                            <Label style="-fx-font-size: 18px; -fx-font-weight: bold;" text="PhÃ¢n tÃ­ch xu hÆ°á»›ng" />

                            <HBox spacing="20">
                                <VBox spacing="5" HBox.hgrow="ALWAYS">
                                    <Label style="-fx-font-size: 14px; -fx-font-weight: bold;" text="ðŸ“ˆ Doanh thu tÄƒng trÆ°á»Ÿng" />
                                    <Label style="-fx-font-size: 12px;" text="So vá»›i ká»³ trÆ°á»›c: +15.3%" />
                                    <Label style="-fx-font-size: 12px;" text="Xu hÆ°á»›ng: TÃ­ch cá»±c" />
                                </VBox>

                                <VBox spacing="5" HBox.hgrow="ALWAYS">
                                    <Label style="-fx-font-size: 14px; -fx-font-weight: bold;" text="ðŸ‘¥ KhÃ¡ch hÃ ng má»›i" />
                                    <Label style="-fx-font-size: 12px;" text="ThÃ¡ng nÃ y: +8.7%" />
                                    <Label style="-fx-font-size: 12px;" text="Xu hÆ°á»›ng: á»”n Ä‘á»‹nh" />
                                </VBox>

                                <VBox spacing="5" HBox.hgrow="ALWAYS">
                                    <Label style="-fx-font-size: 14px; -fx-font-weight: bold;" text="ðŸ›ï¸ ÄÆ¡n hÃ ng trung bÃ¬nh" />
                                    <Label style="-fx-font-size: 12px;" text="GiÃ¡ trá»‹: +12.1%" />
                                    <Label style="-fx-font-size: 12px;" text="Xu hÆ°á»›ng: TÄƒng" />
                                </VBox>
                            </HBox>
                        </VBox>

                        <!-- Performance Metrics -->
                        <VBox spacing="10">
                            <Label style="-fx-font-size: 18px; -fx-font-weight: bold;" text="Chá»‰ sá»‘ hiá»‡u suáº¥t" />

                            <HBox spacing="20">
                                <VBox spacing="8" style="-fx-background-color: #e8f5e8; -fx-padding: 15; -fx-background-radius: 8; -fx-min-width: 200;">
                                    <Label style="-fx-font-size: 14px; -fx-font-weight: bold;" text="ðŸ’° Tá»· suáº¥t lá»£i nhuáº­n" />
                                    <Label style="-fx-font-size: 24px; -fx-text-fill: #28a745;" text="68.5%" />
                                    <Label style="-fx-font-size: 12px; -fx-text-fill: #666;" text="Má»¥c tiÃªu: 65%" />
                                </VBox>

                                <VBox spacing="8" style="-fx-background-color: #fff3e0; -fx-padding: 15; -fx-background-radius: 8; -fx-min-width: 200;">
                                    <Label style="-fx-font-size: 14px; -fx-font-weight: bold;" text="ðŸŽ¯ Tá»· lá»‡ khÃ¡ch quay láº¡i" />
                                    <Label style="-fx-font-size: 24px; -fx-text-fill: #f57c00;" text="72.3%" />
                                    <Label style="-fx-font-size: 12px; -fx-text-fill: #666;" text="Má»¥c tiÃªu: 70%" />
                                </VBox>

                                <VBox spacing="8" style="-fx-background-color: #e3f2fd; -fx-padding: 15; -fx-background-radius: 8; -fx-min-width: 200;">
                                    <Label style="-fx-font-size: 14px; -fx-font-weight: bold;" text="â­ ÄÃ¡nh giÃ¡ trung bÃ¬nh" />
                                    <Label style="-fx-font-size: 24px; -fx-text-fill: #1976d2;" text="4.7/5" />
                                    <Label style="-fx-font-size: 12px; -fx-text-fill: #666;" text="Má»¥c tiÃªu: 4.5/5" />
                                </VBox>
                            </HBox>
                        </VBox>

                    </VBox>
                </ScrollPane>
            </Tab>
        </TabPane>
    </ScrollPane>

</VBox>