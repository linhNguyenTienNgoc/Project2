<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.cafe.controller.payment.PaymentController">
   <top>
      <!-- Header -->
      <HBox alignment="CENTER_LEFT" styleClass="header-section">
         <padding>
            <Insets bottom="15.0" left="20.0" right="20.0" top="15.0" />
         </padding>
         <Label styleClass="page-title" text="ðŸ’³ THANH TOÃN">
            <font>
               <Font name="System Bold" size="24.0" />
            </font>
         </Label>
      </HBox>
   </top>
   <center>
      <GridPane hgap="20.0" vgap="15.0">
         <columnConstraints>
            <ColumnConstraints hgrow="SOMETIMES" minWidth="450.0" prefWidth="450.0" />
            <ColumnConstraints hgrow="SOMETIMES" minWidth="400.0" prefWidth="400.0" maxWidth="450.0" />
         </columnConstraints>
         <rowConstraints>
            <RowConstraints vgrow="ALWAYS" />
         </rowConstraints>
         <padding>
            <Insets bottom="10.0" left="20.0" right="20.0" top="10.0" />
         </padding>
         
         <!-- LEFT COLUMN: Order Details -->
         <VBox spacing="15.0" GridPane.columnIndex="0">
            
            <!-- Table/Order Info Section -->
            <VBox spacing="10.0" styleClass="panel">
               <padding>
                  <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
               </padding>
               <Label styleClass="section-title" text="ThÃ´ng tin Ä‘Æ¡n hÃ ng">
                  <font>
                     <Font name="System Bold" size="16.0" />
                  </font>
               </Label>
               <GridPane hgap="10.0" vgap="8.0">
                  <columnConstraints>
                     <ColumnConstraints hgrow="NEVER" minWidth="80.0" />
                     <ColumnConstraints hgrow="ALWAYS" />
                  </columnConstraints>
                  <Label text="BÃ n sá»‘:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                  <Label fx:id="tableIdLabel" styleClass="info-value" text="--" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                  <Label text="MÃ£ Ä‘Æ¡n:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                  <Label fx:id="orderIdLabel" styleClass="info-value" text="--" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                  <Label text="Phá»¥c vá»¥:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                  <Label fx:id="serverNameLabel" styleClass="info-value" text="--" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                  <Label text="Thá»i gian:" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                  <Label fx:id="orderTimeLabel" styleClass="info-value" text="--" GridPane.columnIndex="1" GridPane.rowIndex="3" />
               </GridPane>
            </VBox>
            
            <!-- Order Items Table -->
            <VBox spacing="10.0" styleClass="panel" VBox.vgrow="ALWAYS">
               <padding>
                  <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
               </padding>
               <Label styleClass="section-title" text="Chi tiáº¿t Ä‘Æ¡n hÃ ng">
                  <font>
                     <Font name="System Bold" size="16.0" />
                  </font>
               </Label>
               <TableView fx:id="itemsTableView" VBox.vgrow="ALWAYS" minHeight="200.0" prefHeight="300.0">
                  <columns>
                     <TableColumn fx:id="sttColumn" maxWidth="50.0" minWidth="40.0" prefWidth="45.0" text="STT" />
                     <TableColumn fx:id="itemNameColumn" minWidth="150.0" prefWidth="180.0" text="TÃªn mÃ³n" />
                     <TableColumn fx:id="quantityColumn" maxWidth="60.0" minWidth="50.0" prefWidth="55.0" text="SL" />
                     <TableColumn fx:id="unitPriceColumn" maxWidth="100.0" minWidth="80.0" prefWidth="90.0" text="ÄÆ¡n giÃ¡" />
                     <TableColumn fx:id="totalPriceColumn" maxWidth="120.0" minWidth="90.0" prefWidth="110.0" text="ThÃ nh tiá»n" />
                  </columns>
               </TableView>
               <HBox alignment="CENTER_RIGHT">
                  <Label fx:id="totalItemsLabel" styleClass="total-items" text="Tá»•ng: 0 mÃ³n">
                     <font>
                        <Font name="System Bold" size="12.0" />
                     </font>
                  </Label>
               </HBox>
            </VBox>
         </VBox>
         
         <!-- RIGHT COLUMN: Payment Calculation -->
         <ScrollPane fitToWidth="true" GridPane.columnIndex="1">
            <VBox spacing="15.0">
            
            <!-- Calculation Section -->
            <VBox spacing="12.0" styleClass="panel">
               <padding>
                  <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
               </padding>
               <Label styleClass="section-title" text="TÃ­nh tiá»n">
                  <font>
                     <Font name="System Bold" size="16.0" />
                  </font>
               </Label>
               
               <!-- Subtotal -->
               <HBox alignment="CENTER_LEFT" spacing="10.0">
                  <Label text="Táº¡m tÃ­nh:" />
                  <Region HBox.hgrow="ALWAYS" />
                  <Label fx:id="subtotalLabel" styleClass="amount-value" text="0 â‚«" />
               </HBox>
               
               <!-- VAT -->
               <HBox alignment="CENTER_LEFT" spacing="10.0">
                  <Label text="Thuáº¿ VAT:" />
                  <TextField fx:id="vatPercentField" maxWidth="60.0" promptText="\%" styleClass="percent-field" text="8" />
                  <Label text="\%" />
                  <Region HBox.hgrow="ALWAYS" />
                  <Label fx:id="vatAmountLabel" styleClass="amount-value" text="0 â‚«" />
               </HBox>
               
               <!-- Discount -->
               <VBox spacing="5.0">
                  <fx:define>
                     <ToggleGroup fx:id="discountTypeGroup" />
                  </fx:define>
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <Label text="Giáº£m giÃ¡:" />
                     <RadioButton fx:id="discountPercentRadio" selected="true" text="\%" toggleGroup="$discountTypeGroup" />
                     <RadioButton fx:id="discountAmountRadio" text="VND" toggleGroup="$discountTypeGroup" />
                  </HBox>
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <TextField fx:id="discountValueField" maxWidth="100.0" promptText="0" styleClass="discount-field" text="0" />
                     <Label fx:id="discountUnitLabel" text="\%" />
                     <Region HBox.hgrow="ALWAYS" />
                     <Label fx:id="discountAmountLabel" styleClass="amount-value discount-amount" text="0 â‚«" />
                  </HBox>
                  <Label fx:id="discountErrorLabel" styleClass="error-text" text="" />
               </VBox>
               
               <Separator />
               
               <!-- Grand Total -->
               <HBox alignment="CENTER_LEFT" spacing="10.0">
                  <Label styleClass="grand-total-label" text="Tá»”NG Cá»˜NG:">
                     <font>
                        <Font name="System Bold" size="18.0" />
                     </font>
                  </Label>
                  <Region HBox.hgrow="ALWAYS" />
                  <Label fx:id="grandTotalLabel" styleClass="kpi-amount" text="0 â‚«">
                     <font>
                        <Font name="System Bold" size="20.0" />
                     </font>
                  </Label>
               </HBox>
            </VBox>
            
                           <!-- Payment Method Section -->
            <VBox spacing="12.0" styleClass="panel">
               <padding>
                  <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
               </padding>
               <Label styleClass="section-title" text="PhÆ°Æ¡ng thá»©c thanh toÃ¡n">
                  <font>
                     <Font name="System Bold" size="16.0" />
                  </font>
               </Label>
               
               <fx:define>
                  <ToggleGroup fx:id="paymentMethodGroup" />
               </fx:define>
               <VBox spacing="8.0">
                  <RadioButton fx:id="cashRadio" selected="true" text="ðŸ’µ Tiá»n máº·t" toggleGroup="$paymentMethodGroup" />
                  <RadioButton fx:id="cardRadio" text="ðŸ’³ Tháº» tÃ­n dá»¥ng/ghi ná»£" toggleGroup="$paymentMethodGroup" />
                  <RadioButton fx:id="momoRadio" text="ðŸ“± VÃ­ MoMo" toggleGroup="$paymentMethodGroup" />
                  <RadioButton fx:id="vnpayRadio" text="ðŸ›ï¸ VNPay" toggleGroup="$paymentMethodGroup" />
                  <RadioButton fx:id="zalopayRadio" text="ðŸ’™ ZaloPay" toggleGroup="$paymentMethodGroup" />
                  <RadioButton fx:id="transferRadio" text="ðŸ¦ Chuyá»ƒn khoáº£n" toggleGroup="$paymentMethodGroup" />
               </VBox>
               
               <!-- Cash Payment Section -->
               <VBox fx:id="cashPaymentSection" spacing="8.0">
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <Label text="Tá»•ng tiá»n:" />
                     <Region HBox.hgrow="ALWAYS" />
                     <Label fx:id="cashTotalLabel" styleClass="cash-total" text="0 â‚«">
                        <font>
                           <Font name="System Bold" size="16.0" />
                        </font>
                     </Label>
                  </HBox>
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <Label text="Tiá»n khÃ¡ch Ä‘Æ°a:" />
                     <Region HBox.hgrow="ALWAYS" />
                     <TextField fx:id="customerAmountField" maxWidth="120.0" promptText="Tá»± Ä‘á»™ng" styleClass="money-field" disable="true" />
                     <Label text="â‚«" />
                  </HBox>
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <Label text="Tiá»n thá»«a:" />
                     <Region HBox.hgrow="ALWAYS" />
                     <Label fx:id="changeAmountLabel" styleClass="change-amount" text="0 â‚«">
                        <font>
                           <Font name="System Bold" size="14.0" />
                        </font>
                     </Label>
                  </HBox>
                  <Label fx:id="cashErrorLabel" styleClass="error-text" text="" />
               </VBox>
               
               <!-- Card/Transfer Payment Section -->
               <VBox fx:id="cardTransferSection" spacing="8.0" visible="false">
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <Label text="MÃ£ giao dá»‹ch:" />
                     <TextField fx:id="transactionCodeField" promptText="Nháº­p mÃ£ giao dá»‹ch" HBox.hgrow="ALWAYS" />
                  </HBox>
                  <VBox spacing="5.0">
                     <Label text="Ghi chÃº:" />
                     <TextArea fx:id="paymentNotesArea" maxHeight="60.0" prefRowCount="3" promptText="Ghi chÃº thÃªm (khÃ´ng báº¯t buá»™c)" />
                  </VBox>
               </VBox>
            </VBox>
            </VBox>
         </ScrollPane>
      </GridPane>
   </center>
   
   <!-- Footer: Action Buttons -->
   <bottom>
      <HBox styleClass="button-bar" spacing="15.0" alignment="CENTER_RIGHT">
         <padding>
            <Insets bottom="20.0" left="20.0" right="20.0" top="15.0" />
         </padding>
         <Button fx:id="cancelButton" mnemonicParsing="false" styleClass="btn-secondary" text="Há»§y (Esc)" minWidth="120.0">
            <font>
               <Font name="System Bold" size="14.0" />
            </font>
         </Button>
         <Button fx:id="printReceiptButton" mnemonicParsing="false" styleClass="btn-secondary" text="In hÃ³a Ä‘Æ¡n (Ctrl+P)" minWidth="140.0">
            <font>
               <Font name="System Bold" size="14.0" />
            </font>
         </Button>
         <Button fx:id="payButton" mnemonicParsing="false" styleClass="btn-primary" text="Thanh toÃ¡n (Enter)" minWidth="140.0">
            <font>
               <Font name="System Bold" size="14.0" />
            </font>
         </Button>
      </HBox>
   </bottom>
</BorderPane>